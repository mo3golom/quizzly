package files

import (
	"encoding/base64"
	_ "image/png"
	"net/http"
	"quizzly/pkg/files"
	"quizzly/pkg/logger"
	"strings"
)

const (
	pathValueFilename = "filename"
	thumbnailBase64   = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAZAAAADwCAYAAAAuPDIiAAAAAXNSR0IArs4c6QAAIABJREFUeF7tnQd4U9X7x99zk7Zsx09kyOhmCQ4UKDPQXW2dRQGZIqOA0KSAg3FBmW1SZhFkKw7qz5+2QicQZl34F9nQRRmCuKBAR5J7/p40SS+1tEmapG36nufxeaT3nPO+53NO7veeTQADEkACSAAJIAErCBAr0mASJIAEkAASQAKAAoKNAAkgASSABKwigAJiFTZMhASQABJAAigg2AaQABJAAkjAKgIoIFZhw0RIAAkgASSAAoJtAAkgASSABKwigAJiFTZMhASQABJAAigg2AaQABJAAkjAKgIoIFZhw0RIAAkgASSAAoJtAAkgASSABKwigAJiFTZMhASQABJAAigg2AaQABJAAkjAKgIoIFZhw0RIAAkgASSAAoJtAAkgASSABKwigAJiFTZMhASQABJAAigg2AaQABJAAkjAKgIoIFZhw0RIAAkgASSAAoJtAAkgASSABKwigAJiFTZMhASQABJAAigg2AaQABJAAkjAKgIoIFZhw0RIAAkgASSAAoJtAAkgASSABKwigAJiFTZMhASQABJAAigg2AaQABJAAkjAKgIoIFZhw0RIAAkgASSAAoJtAAkgASSABKwigAJiFTZMhASQABJAAigg2AaQABJAAkjAKgIoIFZhw0RIAAkgASSAAoJtAAkgASSABKwigAJiFTZMhASQABJAAigg2AaQABJAAkjAKgIoIFZhw0RIAAkgASSAAoJtAAkgASSABKwigAJiFTZMhASQABJAAigg2AaQABJAAkjAKgIoIFZhw0RIAAkgASSAAoJtAAkgASSABKwigAJiFTZMhASQABJAAigg2AaQABJAAkjAKgIoIFZhw0T1jcCA0NCWnmPH+nkUFPQHIO0oBR0QkluQfW5/3pkz36vV6lv1rUzoLxKobQIoILVdA2jfrgTc3d0bjZkinwRS3VQQqCcAVGzzAhA4lpebu2jbmjVfAYDOrg5h5kjAiQiggDhRZWJR7ibwzFtvPfB0y5ZbAMizACCphk8pUGH1zs2b3zl16lQpskQCSKB6Aigg1TPCGPWQgLe3t9uIqKhPCIUX73af/AVA/6AAEgLwHwBoIXouAEeW8NHRcwGA1sNio8tIwKEEUEAcihuNOYoAv2xZFEhdVpX3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"
)

type GetFileHandler struct {
	file files.Manager
	log  logger.Logger
}

func NewGetFileHandler(file files.Manager, log logger.Logger) *GetFileHandler {
	return &GetFileHandler{
		file: file,
		log:  log,
	}
}

func (h *GetFileHandler) Handle() func(w http.ResponseWriter, r *http.Request) {
	return func(w http.ResponseWriter, r *http.Request) {
		w.WriteHeader(http.StatusOK)
		w.Header().Set("Content-Type", "application/octet-stream")

		filename := r.PathValue(pathValueFilename)
		if filename == "" {
			h.thumbnail(w)
			return
		}

		buffer, err := h.file.Get(r.Context(), filename)
		if err != nil {
			h.thumbnail(w)
			return
		}

		_, err = w.Write(buffer.Bytes())
		if err != nil {
			http.Error(w, err.Error(), http.StatusInternalServerError)
			h.log.Error("handle request error", err)
		}
	}
}

func (h *GetFileHandler) thumbnail(w http.ResponseWriter) {
	b64data := thumbnailBase64[strings.IndexByte(thumbnailBase64, ',')+1:]
	out, err := base64.StdEncoding.DecodeString(b64data)
	if err != nil {
		http.Error(w, err.Error(), http.StatusInternalServerError)
		h.log.Error("handle request error", err)
	}

	_, err = w.Write(out)
	if err != nil {
		http.Error(w, err.Error(), http.StatusInternalServerError)
		h.log.Error("handle request error", err)
	}
}
